# deploy-to-git [![npm version](https://badge.fury.io/js/deploy-to-git.svg)](https://badge.fury.io/js/deploy-to-git)
Automatically deploy build artifacts to a Git repository. The tool works awesome with [semantic-release](https://github.com/semantic-release/semantic-release) or manual releasing and any CI service.

```
npm install --save-dev deploy-to-git
```

## Usage

Configuration for the tool needs to be placed at ``config.deployToGit`` object inside  package.json. All fields are required.

- ``repository`` - a repository
- ``branch`` - a branch of the repository where you want to push the artifacts
- ``folder`` - a folder where artifacts are generated by the build and where the repository is cloned
- ``script`` - a script which runs the build
- ``commit`` - commit text
- ``user`` - commitee information for Git - an object with keys ``name`` and ``email``

Substrings started with ``$`` are replaced by corresponding environment variables.

## Real world case

In my case I'd like to get bundled JavaScript files of a library inside ``gh-pages`` branch instead of ``master`` and get rid of meaningless "rebuild" commits. I use semantic-release and Travis CI for automatic releasing.

```js
"scipts": {
  "bundle": "webpack",
  "deploy": "deploy-to-git"
}
"config": {
  "deployToGit": {
      "repository": "https://$GH_TOKEN@github.com/finom/my-awesome-library.git",
      "branch": "gh-pages",
      "folder": "bundle",
      "script": "npm run bundle",
      "commit": "Releasing $npm_package_version",
      "user": {
          "email": "andrey.a.gubanov@gmail.com",
          "name": "Andrey Gubanov (his digital copy)"
      }
  }
}
```

When I run ``npm run deploy`` the tool does the following:

1. Clone the repository to ``bundle`` folder (it needs to be listed at .gitignore).
2. Run script ``npm run bundle`` which in my case replaces older bundled JavaScript files inside  ``bundle`` folder by new ones.
3. Commit and push changes.
